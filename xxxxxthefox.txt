local Aimbot_Library = {}

-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙƒØªØ¨Ø©
Aimbot_Library.Settings = {
    Aimbot_Enabled = false,
    MaxCheckDistance = 10000,
    DetectionPrecision = 0.1,
    PredictionFactor = 0.1,
    FOV = 30,
    Smoothness = 0.2, -- Ø³Ù„Ø§Ø³Ø© Ø§Ù„Ø­Ø±ÙƒØ©
    Protection = true, -- Ø­Ù…Ø§ÙŠØ© Ø¶Ø¯ Ø§Ù„Ø­Ø¸Ø±
}

-- Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local UserInputService = game:GetService("UserInputService")

local localPlayer = Players.LocalPlayer
local camera = Workspace.CurrentCamera

-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
local screenGui = Instance.new("ScreenGui")
screenGui.ResetOnSpawn = false
screenGui.Parent = localPlayer:WaitForChild("PlayerGui")

local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 100, 0, 30)
toggleButton.Position = UDim2.new(0.5, -50, 0.1, 0)
toggleButton.BackgroundTransparency = 0.2
toggleButton.BackgroundColor3 = Color3.fromRGB(128, 128, 128)
toggleButton.Text = "Aimbot Disabled"
toggleButton.Parent = screenGui

local enemyStatusLabel = Instance.new("TextLabel")
enemyStatusLabel.Size = UDim2.new(0, 200, 0, 30)
enemyStatusLabel.Position = UDim2.new(0.5, -100, 0.2, 0)
enemyStatusLabel.BackgroundTransparency = 1
enemyStatusLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
enemyStatusLabel.Text = "No enemy detected"
enemyStatusLabel.Parent = screenGui

-- Ø­Ù…Ø§ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©
local lastProtectionCheck = tick()
local protectionInterval = math.random(5, 10)

-- ÙˆØ¸ÙŠÙØ© ØªØ­Ù‚Ù‚ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
local function performAdvancedProtectionCheck()
    if tick() - lastProtectionCheck >= protectionInterval then
        lastProtectionCheck = tick()
        protectionInterval = math.random(5, 10) -- Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙØ§ØµÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠ
        
        local function checkForSuspiciousActivity()
            -- Ù‚Ù… Ø¨ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ù…Ø´Ø¨ÙˆÙ‡Ø©
            return false
        end
        
        if checkForSuspiciousActivity() then
            warn("Suspicious activity detected! Stopping the script.")
            return
        end
    end
end

-- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
function Aimbot_Library.IsEnemy(player)
    return player.Team == nil or localPlayer.Team == nil or player.Team ~= localPlayer.Team
end

function Aimbot_Library.IsAlive(player)
    return player.Character and player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health > 0
end

-- ÙØ­Øµ Ø§Ù„Ø¬Ø¯Ø±Ø§Ù†
function Aimbot_Library.IsPartVisible(part)
    local origin = camera.CFrame.Position
    local direction = (part.Position - origin).Unit
    local distance = (part.Position - origin).Magnitude

    local raycastParams = RaycastParams.new()
    raycastParams.FilterDescendantsInstances = {localPlayer.Character, part.Parent}
    raycastParams.FilterType = Enum.RaycastFilterType.Blacklist
    raycastParams.IgnoreWater = true

    local raycastResult = Workspace:Raycast(origin, direction * distance, raycastParams)
    return raycastResult == nil -- Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ø´ÙŠØ¡ ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø±
end

function Aimbot_Library.IsWithinFov(targetPosition)
    local direction = (targetPosition - camera.CFrame.Position).Unit
    local lookVector = camera.CFrame.LookVector
    local dotProduct = direction:Dot(lookVector)

    local fovCosine = math.cos(math.rad(Aimbot_Library.Settings.FOV / 2))
    return dotProduct >= fovCosine
end

function Aimbot_Library.GetClosestEnemy()
    local bestHitbox = nil
    local closestDistance = math.huge

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= localPlayer and Aimbot_Library.IsEnemy(player) and Aimbot_Library.IsAlive(player) then
            local head = player.Character:FindFirstChild("Head")
            if head and Aimbot_Library.IsWithinFov(head.Position) and Aimbot_Library.IsPartVisible(head) then
                local distance = (head.Position - localPlayer.Character.HumanoidRootPart.Position).Magnitude
                if distance < closestDistance then
                    closestDistance = distance
                    bestHitbox = head
                end
            end
        end
    end

    return bestHitbox, closestDistance
end

function Aimbot_Library.PredictMovement(hitbox)
    local velocity = hitbox.AssemblyLinearVelocity
    return hitbox.Position + (velocity * Aimbot_Library.Settings.PredictionFactor)
end

-- Ø¯Ø§Ù„Ø© Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø³Ù„Ø§Ø³Ø© ÙÙŠ Ø§Ù„ØªØµÙˆÙŠØ¨
function Aimbot_Library.SmoothAim(currentPosition, targetPosition, smoothness)
    local direction = (targetPosition - currentPosition).unit
    local smoothPosition = currentPosition + direction * smoothness
    return smoothPosition
end

-- ØªØ´ØºÙŠÙ„ Aimbot
RunService.RenderStepped:Connect(function(deltaTime)
    performAdvancedProtectionCheck() -- ØªØ­Ù‚Ù‚ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©

    if Aimbot_Library.Settings.Aimbot_Enabled then
        local targetHitbox, _ = Aimbot_Library.GetClosestEnemy()
        if targetHitbox then
            local targetPosition = Aimbot_Library.PredictMovement(targetHitbox)
            enemyStatusLabel.Text = "Enemy: " .. targetHitbox.Parent.Name
            enemyStatusLabel.TextColor3 = Color3.fromRGB(255, 0, 0)  -- Ø§Ù„Ø¹Ø¯Ùˆ ØªÙ… Ø§Ù„ÙƒØ´Ù Ø¹Ù†Ù‡

            local currentPosition = camera.CFrame.Position
            local smoothPosition = Aimbot_Library.SmoothAim(camera.CFrame.Position, targetPosition, Aimbot_Library.Settings.Smoothness)
            camera.CFrame = CFrame.new(currentPosition, smoothPosition)
        else
            enemyStatusLabel.Text = "No enemy detected"
            enemyStatusLabel.TextColor3 = Color3.fromRGB(0, 255, 0) -- Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ø¯Ùˆ
        end
    end
end)

-- Ø­Ù…Ø§ÙŠØ© Ø¶Ø¯ Ø§Ù„Ø­Ø¸Ø±
if Aimbot_Library.Settings.Protection then
    task.spawn(function()
        while true do
            RunService.Heartbeat:Wait()
            if Aimbot_Library.Settings.Aimbot_Enabled then
                Aimbot_Library.Settings.Aimbot_Enabled = false
                task.wait(0.1)
                Aimbot_Library.Settings.Aimbot_Enabled = true
            end
        end
    end)
end

game.StarterGui:SetCore("SendNotification", {
    Title = "ðŸ”°ðŸ’¯Don't expose yourself";
    Text = "Protection may affect the game";
    Icon = "rbxassetid://115469660765124";
    Duration = 20;
})

-- Ø¥Ø¶Ø§ÙØ© ÙˆØ¸ÙŠÙØ© Ù„ØªØ¨Ø¯ÙŠÙ„ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù€ Aimbot
toggleButton.MouseButton1Click:Connect(function()
    Aimbot_Library.Settings.Aimbot_Enabled = not Aimbot_Library.Settings.Aimbot_Enabled
    if Aimbot_Library.Settings.Aimbot_Enabled then
        toggleButton.Text = "Aimbot Enabled"
    else
        toggleButton.Text = "Aimbot Disabled"
    end
end)

return Aimbot_Library